<!DOCTYPE html><!--FFLv47kkbcVThbBtn6b5h--><html lang="vi" class="scroll-smooth"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/portfolio-blog/_next/static/media/137e738a3044ae84-s.p.238dcd1b.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/portfolio-blog/_next/static/media/186c8edb2e53be7f-s.p.c99fd3fd.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/portfolio-blog/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/portfolio-blog/_next/static/media/a3c73b24938559c3-s.p.bab49f4c.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/portfolio-blog/_next/static/media/fb30396e64817371-s.p.f046f548.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/portfolio-blog/_next/static/chunks/14299e94805ff3d3.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/portfolio-blog/_next/static/chunks/4598cc32edf4e870.js"/><script src="/portfolio-blog/_next/static/chunks/f902e0ff89a974d7.js" async=""></script><script src="/portfolio-blog/_next/static/chunks/11b03c15c8b0d496.js" async=""></script><script src="/portfolio-blog/_next/static/chunks/4ce230393c67cd83.js" async=""></script><script src="/portfolio-blog/_next/static/chunks/turbopack-35c0ac2871311419.js" async=""></script><script src="/portfolio-blog/_next/static/chunks/3b0f1a99fc7a519e.js" async=""></script><script src="/portfolio-blog/_next/static/chunks/2ea5f535648d11e4.js" async=""></script><script src="/portfolio-blog/_next/static/chunks/9c7410708860575f.js" async=""></script><script src="/portfolio-blog/_next/static/chunks/88ef56c00aa0fcf7.js" async=""></script><meta name="next-size-adjust" content=""/><title>JavaScript WebSockets - Giao tiếp Real-time - Blog</title><meta name="description" content="Tìm hiểu về WebSocket API trong JavaScript - cách tạo kết nối hai chiều real-time giữa client và server cho chat, gaming, và các ứng dụng real-time."/><meta name="author" content="Fang"/><meta name="keywords" content="Frontend Developer,UI/UX Designer,React,Next.js,JavaScript,Java,Portfolio"/><meta property="og:title" content="Truong Yen Phuong | Portfolio"/><meta property="og:description" content="Portfolio và Blog cá nhân về Frontend Development và UI/UX Design"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Truong Yen Phuong | Portfolio"/><meta name="twitter:description" content="Portfolio và Blog cá nhân về Frontend Development và UI/UX Design"/><link rel="icon" href="/portfolio-blog/favicon.ico?favicon.3546e4df.ico" sizes="454x454" type="image/x-icon"/><script src="/portfolio-blog/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body class="bai_jamjuree_2f3e59e-module__uL3GvG__variable inter_5901b7c6-module__ec5Qua__variable font-sans antialiased bg-[#f0f2f5]"><div hidden=""><!--$--><!--/$--></div><nav class="fixed z-50 transition-all duration-700 ease-out top-0 left-0 right-0 rounded-none bg-[#f0f2f5]/95 backdrop-blur-xl border-b" style="border-color:var(--color--transparent)"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="relative flex justify-between items-center h-16 transition-all duration-700"><div class="flex items-center"><a class="hover:opacity-80 transition-opacity duration-300" href="/portfolio-blog/"><span class="text-[28px] font-bold text-[#161513]">Fang.</span></a></div><div class="hidden md:flex items-center space-x-6 absolute left-1/2 transform -translate-x-1/2"><a class="px-3 py-2 text-base font-medium transition-all duration-300 text-[#161513] hover:bg-gradient-to-r hover:from-[#b16cea] hover:via-[#ff5e69] hover:via-[#ff8a56] hover:to-[#ffa84b] hover:bg-clip-text hover:text-transparent" href="/portfolio-blog/">Trang chủ</a><a class="px-3 py-2 text-base font-medium transition-all duration-300 text-[#161513] hover:bg-gradient-to-r hover:from-[#b16cea] hover:via-[#ff5e69] hover:via-[#ff8a56] hover:to-[#ffa84b] hover:bg-clip-text hover:text-transparent" href="/portfolio-blog/certificates/">Chứng chỉ</a><a class="px-3 py-2 text-base font-medium transition-all duration-300 bg-gradient-to-r from-[#b16cea] via-[#ff5e69] via-[#ff8a56] to-[#ffa84b] bg-clip-text text-transparent" href="/portfolio-blog/blog/">Bài viết</a><a class="px-3 py-2 text-base font-medium transition-all duration-300 text-[#161513] hover:bg-gradient-to-r hover:from-[#b16cea] hover:via-[#ff5e69] hover:via-[#ff8a56] hover:to-[#ffa84b] hover:bg-clip-text hover:text-transparent" href="/portfolio-blog/about/">Giới thiệu</a></div><div class="flex items-center space-x-4"><div class="hidden md:block"><div class="relative overflow-hidden bg-[#161513] rounded-full group"><a class="relative block text-[#f0f2f5] px-5 py-2.5 text-sm font-medium transition-colors duration-300 group-hover:text-white z-10" href="/portfolio-blog/contact/">Liên hệ</a><div class="absolute inset-0 bg-gradient-to-r from-[#b16cea] via-[#ff5e69] via-[#ff8a56] to-[#ffa84b] transform -translate-x-full group-hover:translate-x-0 transition-transform duration-500 ease-out pointer-events-none"></div></div></div><div class="hidden md:block ml-2"><div class="flex items-center gap-2 text-sm font-medium"><button class="transition-all duration-300 text-[#161513]">VI</button><div class="w-px h-4 bg-gray-300"></div><button class="transition-all duration-300 text-gray-400 hover:bg-gradient-to-r hover:from-[#b16cea] hover:via-[#ff5e69] hover:via-[#ff8a56] hover:to-[#ffa84b] hover:bg-clip-text hover:text-transparent">EN</button></div></div><button class="md:hidden p-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors duration-300" aria-label="Toggle menu"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div></div></div></nav><main class="min-h-screen"><div class="pt-16 min-h-screen bg-[#f0f2f5]"><div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><a class="inline-flex items-center gap-2 text-[#b16cea] hover:text-[#ff5e69] mb-8 transition-colors font-medium" href="/portfolio-blog/blog/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left w-5 h-5" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg><span>Quay lại Blog</span></a><div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8 md:p-12 mb-8"><h1 class="text-3xl md:text-5xl font-bold text-[#161513] mb-4 leading-tight">JavaScript WebSockets - Giao tiếp Real-time</h1><p class="text-lg text-gray-600 leading-relaxed mb-6">Tìm hiểu về WebSocket API trong JavaScript - cách tạo kết nối hai chiều real-time giữa client và server cho chat, gaming, và các ứng dụng real-time.</p><div class="flex items-center justify-between flex-wrap gap-4"><div class="flex flex-wrap gap-2"><span class="px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium">JavaScript</span><span class="px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium">WebSocket</span><span class="px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium">Real-time</span><span class="px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium">Network Programming</span><span class="px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium">Bidirectional</span></div><span class="text-sm text-gray-500 whitespace-nowrap" style="font-family:var(--font-inter)">2024-04-15</span></div></div><article class="mb-12"><div class="prose prose-lg max-w-none prose-headings:text-[#161513] prose-p:text-[#374151] prose-p:leading-relaxed prose-a:text-[#b16cea] prose-a:no-underline hover:prose-a:underline prose-strong:text-[#161513] prose-code:text-[#b16cea] prose-code:bg-gray-100 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-pre:bg-[#1f2937] prose-pre:rounded-lg prose-h2:text-2xl prose-h2:font-bold prose-h2:mt-12 prose-h2:mb-6 prose-h3:text-xl prose-h3:font-semibold prose-h3:mt-8 prose-h3:mb-4"><h2>Khi mình nhận ra HTTP không đủ cho "thời gian thực"</h2>
<p>Xin chào các bạn! Hôm nay mình muốn chia sẻ về hành trình học WebSocket của mình. Đây là một chủ đề mà lúc đầu mình nghĩ "không cần thiết", nhưng khi làm project chat app thì mới vỡ lẽ.</p>
<p>Mình còn nhớ như in: dự án đầu tiên làm chat app cho nhóm, mình dùng polling - cứ mỗi giây gọi API một lần để check tin nhắn mới. Code thì đơn giản, nhưng ôi trời ơi:</p>
<ul>
<li>Pin laptop tụt nhanh như bay</li>
<li>Server bị stress với hàng tá requests không cần thiết</li>
<li>Tin nhắn đến chậm 1-2 giây</li>
<li>Khi có 10 người online, server lag muốn chết</li>
</ul>
<p>Mình ngồi debug cả buổi tối, rồi vô tình đọc được về WebSocket. "Kết nối persistent? Bidirectional? Real-time?" - nghe có vẻ hay đấy! Sau khi chuyển sang WebSocket, wow:</p>
<ul>
<li>Latency giảm từ 2 giây xuống gần như tức thì</li>
<li>Bandwidth giảm 90% (không còn polling vô nghĩa)</li>
<li>Server thoải mái handle 100+ users</li>
<li>User experience mượt mà hẳn ra</li>
</ul>
<p>Đó là khoảnh khắc "aha" khiến mình say mê WebSocket từ đó.</p>
<h2>WebSocket đầu tiên của mình - Từ confuse đến "wow!"</h2>
<p>Lúc đầu, WebSocket nghe có vẻ phức tạp lắm. "Persistent connection? Bidirectional? Full-duplex?" - mình đọc mãi mà không hiểu.</p>
<p>Rồi mình quyết định thử implement. Code đầu tiên của mình:</p>
<pre><code class="language-javascript">// WebSocket connection đầu tiên của mình
const socket = new WebSocket('ws://localhost:8080/chat');

socket.onopen = () => {
  console.log('Yeah! Đã kết nối với server!');
};

socket.onmessage = (event) => {
  const message = JSON.parse(event.data);
  console.log('Có tin nhắn mới:', message);
};

socket.onclose = () => {
  console.log('Mất kết nối rồi!');
};

socket.onerror = (error) => {
  console.error('Lỗi gì vậy trời:', error);
};
</code></pre>
<p>Wow! Chỉ vài dòng code là đã có kết nối real-time. So với HTTP polling phức tạp, WebSocket đơn giản đến bất ngờ.</p>
<p><strong>Điều làm mình ấn tượng nhất:</strong> WebSocket là "full-duplex" - cả client và server đều có thể gửi data bất cứ lúc nào, không cần chờ lượt như HTTP request/response.</p>
<p><strong>So với HTTP:</strong></p>
<ul>
<li>HTTP: Request → Response → Close (như gọi điện thoại)</li>
<li>WebSocket: Connect once → Trao đổi liên tục (như chat voice)</li>
</ul>
<p>Mình đã thử cả HTTP và WebSocket cho cùng một chat app. Sự khác biệt? WebSocket mượt mà, responsive; HTTP thì lag và tốn tài nguyên.</p>
<h2>Học cách xử lý WebSocket events - Không đơn giản như mình nghĩ</h2>
<p>Ban đầu mình nghĩ WebSocket events đơn giản: connect, send, receive, disconnect. Nhưng khi implement thực tế, mới biết có nhiều edge cases.</p>
<p><strong>Những vấn đề mình gặp:</strong></p>
<ol>
<li><strong>Connection không đảm bảo thành công</strong> - Network có thể fail, server có thể down</li>
<li><strong>Messages có thể đến không đúng thứ tự</strong> - Race conditions khi handle multiple events</li>
<li><strong>Binary data phức tạp</strong> - Chuyển đổi Blob, ArrayBuffer đòi hỏi kiến thức về binary</li>
</ol>
<p>Mình đã mất cả ngày để debug lỗi connection. Ban đầu code mình:</p>
<pre><code class="language-javascript">socket.onopen = () => {
  console.log('Connected!');
  // Gửi message ngay lập tức
  socket.send('Hello server!');
};

socket.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log('Nhận:', data);
};
</code></pre>
<p>Nhưng khi network unstable, connection fail mà mình không handle. User thấy app "treo" mà không biết lý do.</p>
<p><strong>Bài học:</strong> Luôn check readyState trước khi send, implement proper error handling.</p>
<p><strong>Gửi dữ liệu qua WebSocket:</strong>
Mình thích nhất là có thể gửi mọi thứ: text, JSON, binary. Trong chat app, mình dùng JSON cho structured data:</p>
<pre><code class="language-javascript">const message = {
  type: 'chat',
  user: 'Minh',
  text: 'Hello everyone!',
  timestamp: Date.now()
};
socket.send(JSON.stringify(message));
</code></pre>
<p><strong>Ready states - Debug helper:</strong>
WebSocket có 4 states (0: Connecting, 1: Open, 2: Closing, 3: Closed). Mình thường log state để debug connection issues.</p>
<h2>Chat app thực tế - Khi lý thuyết gặp thực tế</h2>
<p>Sau khi học xong WebSocket cơ bản, mình quyết định làm một chat app thực tế. Đây là project đầu tiên khiến mình hiểu được giá trị của WebSocket.</p>
<p><strong>Những gì mình implement:</strong></p>
<ol>
<li><strong>Real-time messaging</strong> - Messages hiển thị ngay lập tức, không cần refresh</li>
<li><strong>User join/leave notifications</strong> - Server broadcast khi có user mới</li>
<li><strong>Typing indicators</strong> - Thấy ai đang gõ chữ</li>
<li><strong>Online status</strong> - Biết ai đang online</li>
</ol>
<p>Nhưng khi deploy lên production, mình gặp vấn đề lớn: connection drops. User tắt browser tab, network issues, server restart - tất cả đều break connection.</p>
<p><strong>Auto reconnect - Lifesaver:</strong>
Mình implement reconnect logic. Khi connection lost, tự động thử kết nối lại sau vài giây.</p>
<pre><code class="language-javascript">class ChatApp {
  constructor() {
    this.connect();
  }

  connect() {
    this.socket = new WebSocket('wss://chat.example.com');

    this.socket.onopen = () => {
      console.log('Kết nối lại thành công!');
      // Resend unsent messages
    };

    this.socket.onclose = () => {
      console.log('Mất kết nối, thử lại sau 3 giây...');
      setTimeout(() => this.connect(), 3000);
    };
  }

  sendMessage(text) {
    if (this.socket.readyState === WebSocket.OPEN) {
      this.socket.send(JSON.stringify({ text, user: 'Minh' }));
    } else {
      // Queue message để send khi reconnect
      this.messageQueue.push(text);
    }
  }
}
</code></pre>
<p><strong>Heartbeat - Keep connection alive:</strong>
WebSocket connections có thể "die silently". Mình thêm ping/pong mechanism để detect dead connections early.</p>
<p>Trong chat app production, reconnect + heartbeat giúp user experience mượt mà. User không bao giờ thấy "connection lost" message nữa.</p>
<h2>Những gì mình học được sau project chat app</h2>
<p>Sau khi deploy chat app với WebSocket, mình gặp đủ loại vấn đề: connection drops, reconnect failures, silent disconnections. Nhưng đó cũng là lúc mình học được nhiều nhất.</p>
<p><strong>Connection reliability - Không bao giờ assume:</strong>
Mình từng nghĩ "WebSocket kết nối một lần là xong". Sai rồi! Network unstable, server restart, user close tab - tất cả break connection. Reconnect logic giờ là must-have trong mọi WebSocket app của mình.</p>
<p><strong>Heartbeat mechanism - Detect silent failures:</strong>
WebSocket có thể "die" mà không báo. Mình implement ping/pong để detect dead connections early. Bây giờ mình biết: luôn có health check cho real-time connections.</p>
<p><strong>Message queuing - User experience matters:</strong>
Khi connection lost, mình queue messages và resend khi reconnect. User không bao giờ mất tin nhắn nữa. Đây là chi tiết nhỏ nhưng impact lớn đến UX.</p>
<p><strong>Graceful degradation - Plan B quan trọng:</strong>
WebSocket fail? Fallback sang HTTP polling hoặc show offline mode. App không crash, user vẫn có thể dùng (với chức năng hạn chế).</p>
<h2>Kết luận: WebSocket - Cửa sổ vào thế giới real-time</h2>
<p>WebSocket không chỉ là "thay thế polling" - mà là cách để build interactive applications thực sự. Từ collaborative editors, live dashboards, đến gaming platforms - tất cả đều cần WebSocket.</p>
<p>Trong hành trình học programming, WebSocket dạy mình: real-time features có vẻ cool, nhưng reliability phức tạp hơn nhiều. Network fragile, connections break, user expectations cao. Nhưng khi conquer được, cảm giác build được app "thời gian thực" thật tuyệt vời.</p>
<p>Nếu bạn đang học JavaScript và thấy WebSocket confusing, đừng nản nhé! Mình cũng từng như bạn. Bắt đầu với simple chat app, implement reconnect, rồi dần thêm features. Practice nhiều, debug nhiều, bạn sẽ master được.</p>
<p><em>P.S: Đây là những gì mình học được trong môn JavaScript nâng cao. Nếu bạn thấy bài viết hữu ích, hãy share cho bạn bè cùng học nhé!</em></p>
</div></article><div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"><div class="flex items-center justify-between flex-wrap gap-6"><div class="flex items-center gap-4"><div class="relative w-16 h-16 rounded-full overflow-hidden bg-gradient-to-br from-indigo-400 to-purple-500 flex-shrink-0"><img alt="Truong Yen Phuong" loading="lazy" decoding="async" data-nimg="fill" class="object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="/images/avatar/avatar.png"/></div><div><h3 class="font-semibold text-[#161513] text-lg mb-1">Truong Yen Phuong</h3><p class="text-sm text-gray-600">Tổng hợp kinh nghiệm</p></div></div><div class="flex items-center gap-4 flex-wrap"><div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-share2 lucide-share-2 w-5 h-5 text-[#b16cea]" aria-hidden="true"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"></line><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"></line></svg><span class="font-semibold text-[#161513]">Chia sẻ bài viết:</span></div><div class="flex items-center gap-2"><button type="button" class="social-link w-inline-block gradient" aria-label="Share on Facebook"><div class="social-icon-wrapper" style="background-color:#f0f2f5"><div class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-facebook w-5 h-5" aria-hidden="true"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></div></div></button><button type="button" class="social-link w-inline-block gradient" aria-label="Share on X"><div class="social-icon-wrapper" style="background-color:#f0f2f5"><div class="social-icon"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></div></div></button><button type="button" class="social-link w-inline-block gradient" aria-label="Share on LinkedIn"><div class="social-icon-wrapper" style="background-color:#f0f2f5"><div class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin w-5 h-5" aria-hidden="true"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg></div></div></button><button type="button" class="social-link w-inline-block gradient" aria-label="Copy link"><div class="social-icon-wrapper" style="background-color:#f0f2f5"><div class="social-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy w-5 h-5" aria-hidden="true"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></div></div></button></div></div></div></div><div class="text-center"><a class="inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-[#b16cea] to-[#ff5e69] text-white rounded-lg font-semibold hover:opacity-90 transition-opacity" href="/portfolio-blog/blog/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-left w-5 h-5" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>Xem tất cả bài viết</a></div></div></div><!--$--><!--/$--></main><footer class="footer bg-[#f0f2f5]"><div class="w-layout-blockcontainer container w-container"><div class="divider" style="background-color:rgb(22, 21, 19)"></div><div class="footer-wrap"><div class="flex footer-left"><a class="brand-logo " href="/portfolio-blog/"><span class="text-[30px] font-bold text-[#161513]">Fang.</span></a><div class="copyright dark" style="color:rgb(22, 21, 19)">© 2025 Designed by Truong Yen Phuong</div></div><div class="flex footer-right"><div class="nav-link-wrap"><a class="nav-link footer-link " style="color:rgb(22, 21, 19)" href="/portfolio-blog/">Trang chủ</a><a class="nav-link footer-link " style="color:rgb(22, 21, 19)" href="/portfolio-blog/certificates/">Chứng chỉ</a><a class="nav-link footer-link w--current" style="color:rgb(22, 21, 19)" href="/portfolio-blog/blog/">Bài viết</a><a class="nav-link footer-link " style="color:rgb(22, 21, 19)" href="/portfolio-blog/about/">Giới thiệu</a></div><div class="social-link-wrap"><a href="https://github.com/Pt-14" target="_blank" rel="noopener noreferrer" class="social-link w-inline-block gradient"><div class="social-icon-wrapper"><div class="social-icon"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></div></div></a><a href="https://www.linkedin.com/in/phuong-truong-yen-894359371/" target="_blank" rel="noopener noreferrer" class="social-link w-inline-block gradient"><div class="social-icon-wrapper"><div class="social-icon"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></div></div></a><a href="https://x.com/itsnongfang" target="_blank" rel="noopener noreferrer" class="social-link w-inline-block gradient"><div class="social-icon-wrapper"><div class="social-icon"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></div></div></a><a href="https://www.facebook.com/phuong.yentruon" target="_blank" rel="noopener noreferrer" class="social-link w-inline-block gradient"><div class="social-icon-wrapper"><div class="social-icon"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></div></div></a><a href="https://www.instagram.com/heaven__fang/" target="_blank" rel="noopener noreferrer" class="social-link w-inline-block gradient"><div class="social-icon-wrapper"><div class="social-icon"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path></svg></div></div></a></div></div></div></div></footer><script src="/portfolio-blog/_next/static/chunks/4598cc32edf4e870.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[54731,[\"/portfolio-blog/_next/static/chunks/3b0f1a99fc7a519e.js\"],\"LanguageProvider\"]\n3:I[76055,[\"/portfolio-blog/_next/static/chunks/3b0f1a99fc7a519e.js\"],\"default\"]\n4:I[74919,[\"/portfolio-blog/_next/static/chunks/2ea5f535648d11e4.js\",\"/portfolio-blog/_next/static/chunks/9c7410708860575f.js\"],\"default\"]\n5:I[7882,[\"/portfolio-blog/_next/static/chunks/2ea5f535648d11e4.js\",\"/portfolio-blog/_next/static/chunks/9c7410708860575f.js\"],\"default\"]\n6:I[56450,[\"/portfolio-blog/_next/static/chunks/3b0f1a99fc7a519e.js\"],\"default\"]\n8:I[82321,[\"/portfolio-blog/_next/static/chunks/2ea5f535648d11e4.js\",\"/portfolio-blog/_next/static/chunks/9c7410708860575f.js\"],\"OutletBoundary\"]\n9:\"$Sreact.suspense\"\nb:I[82321,[\"/portfolio-blog/_next/static/chunks/2ea5f535648d11e4.js\",\"/portfolio-blog/_next/static/chunks/9c7410708860575f.js\"],\"ViewportBoundary\"]\nd:I[82321,[\"/portfolio-blog/_next/static/chunks/2ea5f535648d11e4.js\",\"/portfolio-blog/_next/static/chunks/9c7410708860575f.js\"],\"MetadataBoundary\"]\nf:I[23564,[],\"default\"]\n:HL[\"/portfolio-blog/_next/static/chunks/14299e94805ff3d3.css\",\"style\"]\n:HL[\"/portfolio-blog/_next/static/media/137e738a3044ae84-s.p.238dcd1b.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/portfolio-blog/_next/static/media/186c8edb2e53be7f-s.p.c99fd3fd.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/portfolio-blog/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/portfolio-blog/_next/static/media/a3c73b24938559c3-s.p.bab49f4c.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/portfolio-blog/_next/static/media/fb30396e64817371-s.p.f046f548.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"FFLv47kkbcVThbBtn6b5h\",\"c\":[\"\",\"blog\",\"javascript-es6\",\"\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"javascript-es6\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/portfolio-blog/_next/static/chunks/14299e94805ff3d3.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/portfolio-blog/_next/static/chunks/3b0f1a99fc7a519e.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"vi\",\"className\":\"scroll-smooth\",\"children\":[\"$\",\"body\",null,{\"className\":\"bai_jamjuree_2f3e59e-module__uL3GvG__variable inter_5901b7c6-module__ec5Qua__variable font-sans antialiased bg-[#f0f2f5]\",\"children\":[\"$\",\"$L2\",null,{\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"className\":\"min-h-screen\",\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L6\",null,{}]]}]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",[[\"$\",\"script\",\"script-0\",{\"src\":\"/portfolio-blog/_next/static/chunks/88ef56c00aa0fcf7.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L8\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@a\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.Metadata\",\"children\":\"$Le\"}]}]}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"10:I[65645,[\"/portfolio-blog/_next/static/chunks/3b0f1a99fc7a519e.js\",\"/portfolio-blog/_next/static/chunks/88ef56c00aa0fcf7.js\"],\"\"]\n11:T23ae,"])</script><script>self.__next_f.push([1,"\u003ch2\u003eKhi mình nhận ra HTTP không đủ cho \"thời gian thực\"\u003c/h2\u003e\n\u003cp\u003eXin chào các bạn! Hôm nay mình muốn chia sẻ về hành trình học WebSocket của mình. Đây là một chủ đề mà lúc đầu mình nghĩ \"không cần thiết\", nhưng khi làm project chat app thì mới vỡ lẽ.\u003c/p\u003e\n\u003cp\u003eMình còn nhớ như in: dự án đầu tiên làm chat app cho nhóm, mình dùng polling - cứ mỗi giây gọi API một lần để check tin nhắn mới. Code thì đơn giản, nhưng ôi trời ơi:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePin laptop tụt nhanh như bay\u003c/li\u003e\n\u003cli\u003eServer bị stress với hàng tá requests không cần thiết\u003c/li\u003e\n\u003cli\u003eTin nhắn đến chậm 1-2 giây\u003c/li\u003e\n\u003cli\u003eKhi có 10 người online, server lag muốn chết\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eMình ngồi debug cả buổi tối, rồi vô tình đọc được về WebSocket. \"Kết nối persistent? Bidirectional? Real-time?\" - nghe có vẻ hay đấy! Sau khi chuyển sang WebSocket, wow:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eLatency giảm từ 2 giây xuống gần như tức thì\u003c/li\u003e\n\u003cli\u003eBandwidth giảm 90% (không còn polling vô nghĩa)\u003c/li\u003e\n\u003cli\u003eServer thoải mái handle 100+ users\u003c/li\u003e\n\u003cli\u003eUser experience mượt mà hẳn ra\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eĐó là khoảnh khắc \"aha\" khiến mình say mê WebSocket từ đó.\u003c/p\u003e\n\u003ch2\u003eWebSocket đầu tiên của mình - Từ confuse đến \"wow!\"\u003c/h2\u003e\n\u003cp\u003eLúc đầu, WebSocket nghe có vẻ phức tạp lắm. \"Persistent connection? Bidirectional? Full-duplex?\" - mình đọc mãi mà không hiểu.\u003c/p\u003e\n\u003cp\u003eRồi mình quyết định thử implement. Code đầu tiên của mình:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003e// WebSocket connection đầu tiên của mình\nconst socket = new WebSocket('ws://localhost:8080/chat');\n\nsocket.onopen = () =\u003e {\n  console.log('Yeah! Đã kết nối với server!');\n};\n\nsocket.onmessage = (event) =\u003e {\n  const message = JSON.parse(event.data);\n  console.log('Có tin nhắn mới:', message);\n};\n\nsocket.onclose = () =\u003e {\n  console.log('Mất kết nối rồi!');\n};\n\nsocket.onerror = (error) =\u003e {\n  console.error('Lỗi gì vậy trời:', error);\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWow! Chỉ vài dòng code là đã có kết nối real-time. So với HTTP polling phức tạp, WebSocket đơn giản đến bất ngờ.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eĐiều làm mình ấn tượng nhất:\u003c/strong\u003e WebSocket là \"full-duplex\" - cả client và server đều có thể gửi data bất cứ lúc nào, không cần chờ lượt như HTTP request/response.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eSo với HTTP:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eHTTP: Request → Response → Close (như gọi điện thoại)\u003c/li\u003e\n\u003cli\u003eWebSocket: Connect once → Trao đổi liên tục (như chat voice)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eMình đã thử cả HTTP và WebSocket cho cùng một chat app. Sự khác biệt? WebSocket mượt mà, responsive; HTTP thì lag và tốn tài nguyên.\u003c/p\u003e\n\u003ch2\u003eHọc cách xử lý WebSocket events - Không đơn giản như mình nghĩ\u003c/h2\u003e\n\u003cp\u003eBan đầu mình nghĩ WebSocket events đơn giản: connect, send, receive, disconnect. Nhưng khi implement thực tế, mới biết có nhiều edge cases.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eNhững vấn đề mình gặp:\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eConnection không đảm bảo thành công\u003c/strong\u003e - Network có thể fail, server có thể down\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eMessages có thể đến không đúng thứ tự\u003c/strong\u003e - Race conditions khi handle multiple events\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eBinary data phức tạp\u003c/strong\u003e - Chuyển đổi Blob, ArrayBuffer đòi hỏi kiến thức về binary\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eMình đã mất cả ngày để debug lỗi connection. Ban đầu code mình:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003esocket.onopen = () =\u003e {\n  console.log('Connected!');\n  // Gửi message ngay lập tức\n  socket.send('Hello server!');\n};\n\nsocket.onmessage = (event) =\u003e {\n  const data = JSON.parse(event.data);\n  console.log('Nhận:', data);\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNhưng khi network unstable, connection fail mà mình không handle. User thấy app \"treo\" mà không biết lý do.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eBài học:\u003c/strong\u003e Luôn check readyState trước khi send, implement proper error handling.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eGửi dữ liệu qua WebSocket:\u003c/strong\u003e\nMình thích nhất là có thể gửi mọi thứ: text, JSON, binary. Trong chat app, mình dùng JSON cho structured data:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003econst message = {\n  type: 'chat',\n  user: 'Minh',\n  text: 'Hello everyone!',\n  timestamp: Date.now()\n};\nsocket.send(JSON.stringify(message));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eReady states - Debug helper:\u003c/strong\u003e\nWebSocket có 4 states (0: Connecting, 1: Open, 2: Closing, 3: Closed). Mình thường log state để debug connection issues.\u003c/p\u003e\n\u003ch2\u003eChat app thực tế - Khi lý thuyết gặp thực tế\u003c/h2\u003e\n\u003cp\u003eSau khi học xong WebSocket cơ bản, mình quyết định làm một chat app thực tế. Đây là project đầu tiên khiến mình hiểu được giá trị của WebSocket.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eNhững gì mình implement:\u003c/strong\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eReal-time messaging\u003c/strong\u003e - Messages hiển thị ngay lập tức, không cần refresh\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eUser join/leave notifications\u003c/strong\u003e - Server broadcast khi có user mới\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eTyping indicators\u003c/strong\u003e - Thấy ai đang gõ chữ\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eOnline status\u003c/strong\u003e - Biết ai đang online\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eNhưng khi deploy lên production, mình gặp vấn đề lớn: connection drops. User tắt browser tab, network issues, server restart - tất cả đều break connection.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAuto reconnect - Lifesaver:\u003c/strong\u003e\nMình implement reconnect logic. Khi connection lost, tự động thử kết nối lại sau vài giây.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-javascript\"\u003eclass ChatApp {\n  constructor() {\n    this.connect();\n  }\n\n  connect() {\n    this.socket = new WebSocket('wss://chat.example.com');\n\n    this.socket.onopen = () =\u003e {\n      console.log('Kết nối lại thành công!');\n      // Resend unsent messages\n    };\n\n    this.socket.onclose = () =\u003e {\n      console.log('Mất kết nối, thử lại sau 3 giây...');\n      setTimeout(() =\u003e this.connect(), 3000);\n    };\n  }\n\n  sendMessage(text) {\n    if (this.socket.readyState === WebSocket.OPEN) {\n      this.socket.send(JSON.stringify({ text, user: 'Minh' }));\n    } else {\n      // Queue message để send khi reconnect\n      this.messageQueue.push(text);\n    }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eHeartbeat - Keep connection alive:\u003c/strong\u003e\nWebSocket connections có thể \"die silently\". Mình thêm ping/pong mechanism để detect dead connections early.\u003c/p\u003e\n\u003cp\u003eTrong chat app production, reconnect + heartbeat giúp user experience mượt mà. User không bao giờ thấy \"connection lost\" message nữa.\u003c/p\u003e\n\u003ch2\u003eNhững gì mình học được sau project chat app\u003c/h2\u003e\n\u003cp\u003eSau khi deploy chat app với WebSocket, mình gặp đủ loại vấn đề: connection drops, reconnect failures, silent disconnections. Nhưng đó cũng là lúc mình học được nhiều nhất.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eConnection reliability - Không bao giờ assume:\u003c/strong\u003e\nMình từng nghĩ \"WebSocket kết nối một lần là xong\". Sai rồi! Network unstable, server restart, user close tab - tất cả break connection. Reconnect logic giờ là must-have trong mọi WebSocket app của mình.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eHeartbeat mechanism - Detect silent failures:\u003c/strong\u003e\nWebSocket có thể \"die\" mà không báo. Mình implement ping/pong để detect dead connections early. Bây giờ mình biết: luôn có health check cho real-time connections.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eMessage queuing - User experience matters:\u003c/strong\u003e\nKhi connection lost, mình queue messages và resend khi reconnect. User không bao giờ mất tin nhắn nữa. Đây là chi tiết nhỏ nhưng impact lớn đến UX.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eGraceful degradation - Plan B quan trọng:\u003c/strong\u003e\nWebSocket fail? Fallback sang HTTP polling hoặc show offline mode. App không crash, user vẫn có thể dùng (với chức năng hạn chế).\u003c/p\u003e\n\u003ch2\u003eKết luận: WebSocket - Cửa sổ vào thế giới real-time\u003c/h2\u003e\n\u003cp\u003eWebSocket không chỉ là \"thay thế polling\" - mà là cách để build interactive applications thực sự. Từ collaborative editors, live dashboards, đến gaming platforms - tất cả đều cần WebSocket.\u003c/p\u003e\n\u003cp\u003eTrong hành trình học programming, WebSocket dạy mình: real-time features có vẻ cool, nhưng reliability phức tạp hơn nhiều. Network fragile, connections break, user expectations cao. Nhưng khi conquer được, cảm giác build được app \"thời gian thực\" thật tuyệt vời.\u003c/p\u003e\n\u003cp\u003eNếu bạn đang học JavaScript và thấy WebSocket confusing, đừng nản nhé! Mình cũng từng như bạn. Bắt đầu với simple chat app, implement reconnect, rồi dần thêm features. Practice nhiều, debug nhiều, bạn sẽ master được.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eP.S: Đây là những gì mình học được trong môn JavaScript nâng cao. Nếu bạn thấy bài viết hữu ích, hãy share cho bạn bè cùng học nhé!\u003c/em\u003e\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"div\",null,{\"className\":\"pt-16 min-h-screen bg-[#f0f2f5]\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12\",\"children\":[[\"$\",\"$L10\",null,{\"href\":\"/blog\",\"className\":\"inline-flex items-center gap-2 text-[#b16cea] hover:text-[#ff5e69] mb-8 transition-colors font-medium\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left w-5 h-5\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"children\":\"Quay lại Blog\"}]]}],[\"$\",\"div\",null,{\"className\":\"bg-white rounded-xl shadow-sm border border-gray-200 p-8 md:p-12 mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-3xl md:text-5xl font-bold text-[#161513] mb-4 leading-tight\",\"children\":\"JavaScript WebSockets - Giao tiếp Real-time\"}],[\"$\",\"p\",null,{\"className\":\"text-lg text-gray-600 leading-relaxed mb-6\",\"children\":\"Tìm hiểu về WebSocket API trong JavaScript - cách tạo kết nối hai chiều real-time giữa client và server cho chat, gaming, và các ứng dụng real-time.\"}],[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between flex-wrap gap-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-2\",\"children\":[[\"$\",\"span\",\"JavaScript\",{\"className\":\"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\",\"children\":\"JavaScript\"}],[\"$\",\"span\",\"WebSocket\",{\"className\":\"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\",\"children\":\"WebSocket\"}],[\"$\",\"span\",\"Real-time\",{\"className\":\"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\",\"children\":\"Real-time\"}],[\"$\",\"span\",\"Network Programming\",{\"className\":\"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\",\"children\":\"Network Programming\"}],[\"$\",\"span\",\"Bidirectional\",{\"className\":\"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\",\"children\":\"Bidirectional\"}]]}],[\"$\",\"span\",null,{\"className\":\"text-sm text-gray-500 whitespace-nowrap\",\"style\":{\"fontFamily\":\"var(--font-inter)\"},\"children\":\"2024-04-15\"}]]}]]}],[\"$\",\"article\",null,{\"className\":\"mb-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"prose prose-lg max-w-none prose-headings:text-[#161513] prose-p:text-[#374151] prose-p:leading-relaxed prose-a:text-[#b16cea] prose-a:no-underline hover:prose-a:underline prose-strong:text-[#161513] prose-code:text-[#b16cea] prose-code:bg-gray-100 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-pre:bg-[#1f2937] prose-pre:rounded-lg prose-h2:text-2xl prose-h2:font-bold prose-h2:mt-12 prose-h2:mb-6 prose-h3:text-xl prose-h3:font-semibold prose-h3:mt-8 prose-h3:mb-4\",\"dangerouslySetInnerHTML\":{\"__html\":\"$11\"}}]}],\"$L12\",\"$L13\"]}]}]\n"])</script><script>self.__next_f.push([1,"14:I[43465,[\"/portfolio-blog/_next/static/chunks/3b0f1a99fc7a519e.js\",\"/portfolio-blog/_next/static/chunks/88ef56c00aa0fcf7.js\"],\"Image\"]\n15:I[32771,[\"/portfolio-blog/_next/static/chunks/3b0f1a99fc7a519e.js\",\"/portfolio-blog/_next/static/chunks/88ef56c00aa0fcf7.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"12:[\"$\",\"div\",null,{\"className\":\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center justify-between flex-wrap gap-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-4\",\"children\":[[\"$\",\"div\",null,{\"className\":\"relative w-16 h-16 rounded-full overflow-hidden bg-gradient-to-br from-indigo-400 to-purple-500 flex-shrink-0\",\"children\":[\"$\",\"$L14\",null,{\"src\":\"/images/avatar/avatar.png\",\"alt\":\"Truong Yen Phuong\",\"fill\":true,\"className\":\"object-cover\"}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"className\":\"font-semibold text-[#161513] text-lg mb-1\",\"children\":\"Truong Yen Phuong\"}],[\"$\",\"p\",null,{\"className\":\"text-sm text-gray-600\",\"children\":\"Tổng hợp kinh nghiệm\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-4 flex-wrap\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-share2 lucide-share-2 w-5 h-5 text-[#b16cea]\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"circle\",\"gq8acd\",{\"cx\":\"18\",\"cy\":\"5\",\"r\":\"3\"}],[\"$\",\"circle\",\"w7nqdw\",{\"cx\":\"6\",\"cy\":\"12\",\"r\":\"3\"}],[\"$\",\"circle\",\"1xt0gg\",{\"cx\":\"18\",\"cy\":\"19\",\"r\":\"3\"}],[\"$\",\"line\",\"47mynk\",{\"x1\":\"8.59\",\"x2\":\"15.42\",\"y1\":\"13.51\",\"y2\":\"17.49\"}],[\"$\",\"line\",\"1n3mei\",{\"x1\":\"15.41\",\"x2\":\"8.59\",\"y1\":\"6.51\",\"y2\":\"10.49\"}],\"$undefined\"]}],[\"$\",\"span\",null,{\"className\":\"font-semibold text-[#161513]\",\"children\":\"Chia sẻ bài viết:\"}]]}],[\"$\",\"$L15\",null,{\"title\":\"JavaScript WebSockets - Giao tiếp Real-time\",\"slug\":\"javascript-es6\"}]]}]]}]}]\n"])</script><script>self.__next_f.push([1,"13:[\"$\",\"div\",null,{\"className\":\"text-center\",\"children\":[\"$\",\"$L10\",null,{\"href\":\"/blog\",\"className\":\"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-[#b16cea] to-[#ff5e69] text-white rounded-lg font-semibold hover:opacity-90 transition-opacity\",\"children\":[[\"$\",\"svg\",null,{\"ref\":\"$undefined\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":24,\"height\":24,\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":2,\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"className\":\"lucide lucide-arrow-left w-5 h-5\",\"aria-hidden\":\"true\",\"children\":[[\"$\",\"path\",\"1l729n\",{\"d\":\"m12 19-7-7 7-7\"}],[\"$\",\"path\",\"x3x0zl\",{\"d\":\"M19 12H5\"}],\"$undefined\"]}],\"Xem tất cả bài viết\"]}]}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"16:I[93592,[\"/portfolio-blog/_next/static/chunks/2ea5f535648d11e4.js\",\"/portfolio-blog/_next/static/chunks/9c7410708860575f.js\"],\"IconMark\"]\na:null\ne:[[\"$\",\"title\",\"0\",{\"children\":\"JavaScript WebSockets - Giao tiếp Real-time - Blog\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Tìm hiểu về WebSocket API trong JavaScript - cách tạo kết nối hai chiều real-time giữa client và server cho chat, gaming, và các ứng dụng real-time.\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Fang\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"Frontend Developer,UI/UX Designer,React,Next.js,JavaScript,Java,Portfolio\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Truong Yen Phuong | Portfolio\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"Portfolio và Blog cá nhân về Frontend Development và UI/UX Design\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"Truong Yen Phuong | Portfolio\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"Portfolio và Blog cá nhân về Frontend Development và UI/UX Design\"}],[\"$\",\"link\",\"10\",{\"rel\":\"icon\",\"href\":\"/portfolio-blog/favicon.ico?favicon.3546e4df.ico\",\"sizes\":\"454x454\",\"type\":\"image/x-icon\"}],[\"$\",\"$L16\",\"11\",{}]]\n"])</script></body></html>